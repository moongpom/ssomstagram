{%extends 'base.html'%}

{%block content%}
   
    {% load static %}
    <style>
        #userSub{
            position: absolute;
            margin-left: 700px;
            border: 1px solid black;
        }
    </style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
           
            $("#toggle").click(function() {
                $("#userSub").slideToggle("fast"); 
            });
        });
    function deletePost() {
        var ret = confirm("ê²Œì‹œë¬¼ì„ ì‚­ì œí•©ë‹ˆë‹¤.");
        return ret;
    }

    function authMessage(){
                       alert("ìª½ì§€ëŠ” ë¡œê·¸ì¸ í•˜ì‹  ë’¤ ì´ìš©ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤");
                  }
</script>
    <div class="newPost_list">
        <h5 class="title">ğŸ”” ìƒˆë¡œ ì˜¬ë¼ì˜¨ ê¸€ ğŸ””</h5>
        <hr>
        {% for unit in postList %}
            <div id="content">  
               
                    {% if unit.image %}
                        <img src={{unit.image.url}} alt='image' height="300px" width="300px">
                         
                    {% endif %}<br>
                    ì œëª©: {{unit.title}}... |
                    ê¸€ë‚´ìš©: {{unit.summary}}... |
                    <small>{{unit.pub_date}} </small>
                    <button id="toggle">ì‘ì„±ì : {{unit.writer}}</button> 
                    <ul id="userSub">
                        {% if user.is_authenticated %}
                        <li><a href="{% url 'newMessage' unit.writer unit.title%}" > ìª½ì§€ë³´ë‚´ê¸°</a></li>
                        {% else %}
                        <li><a href="{% url 'newMessage' unit.writer unit.title%}" onclick="authMessage()" > ìª½ì§€ë³´ë‚´ê¸°</a></li>
                        {%endif%}
                        <li><a href="{% url 'userPage' unit.writer %}" > êµ¬ê²½ê°€ê¸°</a></li>
                    </ul>
                    <br><br> {% if user == postContents.writer %}
                    <a class="toNext" href="{% url 'deletePost' unit.id%}" onclick="return deletePost()">ì‚­ì œí•˜ê¸°</a>
                    {% elif user.is_staff%}
                    <a class="toNext" href="{% url 'deletePost' unit.id%}" onclick="return deletePost()">ì‚­ì œí•˜ê¸°</a>
                    {%endif%}
            </div>  
        {% endfor %}
    </div>


    {%endblock%}